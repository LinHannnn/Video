# è§†é¢‘è§£ææ¥å£ä½¿ç”¨ç¤ºä¾‹

## ğŸ¯ æ ¸å¿ƒæ¥å£

### POST `/api/video/parse`

**æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ - åªéœ€è¦ä¸€ä¸ª `url` å­—æ®µï¼**

## ğŸ“ è¯·æ±‚ç¤ºä¾‹

### 1. æŠ–éŸ³è§†é¢‘
```bash
curl -X POST http://localhost:3000/api/video/parse \
  -H "Content-Type: application/json" \
  -d '{"url": "https://v.douyin.com/iFRvuEjE/"}'
```

### 2. å“”å“©å“”å“©è§†é¢‘ï¼ˆåŒ…å«åˆ†äº«æ–‡æœ¬ï¼‰
```bash
curl -X POST http://localhost:3000/api/video/parse \
  -H "Content-Type: application/json" \
  -d '{"url": "ã€çƒ­é—¨è§†é¢‘ã€‘https://www.bilibili.com/video/BV1xx4y1Z7zz è¶…æœ‰è¶£çš„å†…å®¹"}'
```

### 3. å°çº¢ä¹¦è§†é¢‘ï¼ˆåŒ…å«emojiï¼‰
```bash
curl -X POST http://localhost:3000/api/video/parse \
  -H "Content-Type: application/json" \
  -d '{"url": "ğŸ˜Šå¥½æ£’çš„è§†é¢‘ https://www.xiaohongshu.com/discovery/item/xxx âœ¨å¿…çœ‹"}'
```

### 4. å¿«æ‰‹è§†é¢‘
```bash
curl -X POST http://localhost:3000/api/video/parse \
  -H "Content-Type: application/json" \
  -d '{"url": "https://kuaishou.com/s/abc123def"}'
```

## ğŸ“Š å“åº”æ ¼å¼

### æˆåŠŸå“åº”
```json
{
  "code": 200,
  "msg": "è§£ææˆåŠŸ",
  "data": {
    "platform": "douyin",
    "title": "è§†é¢‘æ ‡é¢˜",
    "author": "ä½œè€…åç§°",
    "duration": "00:30",
    "videoUrl": "https://video.douyin.com/...",
    "coverImage": "https://cover.douyin.com/...",
    "description": "è§†é¢‘æè¿°"
  },
  "exec_time": 1.234,
  "user_ip": "192.168.1.100"
}
```

### é”™è¯¯å“åº”
```json
{
  "code": 400,
  "msg": "è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥",
  "data": null,
  "errors": ["URLä¸èƒ½ä¸ºç©º"],
  "exec_time": 0.001,
  "user_ip": "192.168.1.100"
}
```

## ğŸ”§ JavaScript ç¤ºä¾‹

### ä½¿ç”¨ fetch
```javascript
async function parseVideo(url) {
  try {
    const response = await fetch('http://localhost:3000/api/video/parse', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ url })
    });
    
    const result = await response.json();
    
    if (result.code === 200) {
      console.log('è§£ææˆåŠŸ:', result.data);
      return result.data;
    } else {
      console.error('è§£æå¤±è´¥:', result.msg);
      return null;
    }
  } catch (error) {
    console.error('è¯·æ±‚å¤±è´¥:', error);
    return null;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
parseVideo('https://v.douyin.com/iFRvuEjE/');
```

### ä½¿ç”¨ axios
```javascript
const axios = require('axios');

async function parseVideo(url) {
  try {
    const response = await axios.post('http://localhost:3000/api/video/parse', {
      url: url
    });
    
    console.log('è§£ææˆåŠŸ:', response.data.data);
    return response.data.data;
  } catch (error) {
    if (error.response) {
      console.error('è§£æå¤±è´¥:', error.response.data.msg);
    } else {
      console.error('è¯·æ±‚å¤±è´¥:', error.message);
    }
    return null;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
parseVideo('https://v.douyin.com/iFRvuEjE/');
```

## ğŸŒ Python ç¤ºä¾‹

```python
import requests
import json

def parse_video(url):
    """è§£æè§†é¢‘é“¾æ¥"""
    try:
        response = requests.post(
            'http://localhost:3000/api/video/parse',
            headers={'Content-Type': 'application/json'},
            json={'url': url},
            timeout=10
        )
        
        result = response.json()
        
        if result['code'] == 200:
            print('è§£ææˆåŠŸ:', result['data'])
            return result['data']
        else:
            print('è§£æå¤±è´¥:', result['msg'])
            return None
            
    except requests.RequestException as e:
        print('è¯·æ±‚å¤±è´¥:', str(e))
        return None

# ä½¿ç”¨ç¤ºä¾‹
parse_video('https://v.douyin.com/iFRvuEjE/')
```

## âœ¨ æ™ºèƒ½ç‰¹æ€§

### 1. è‡ªåŠ¨å¹³å°è¯†åˆ«
ç³»ç»Ÿä¼šæ ¹æ®URLè‡ªåŠ¨è¯†åˆ«è§†é¢‘å¹³å°ï¼š
- `douyin.com` æˆ– `tiktok.com` â†’ æŠ–éŸ³/TikTok
- `bilibili.com` æˆ– `b23.tv` â†’ å“”å“©å“”å“©
- `xiaohongshu.com` æˆ– `xhslink.com` â†’ å°çº¢ä¹¦
- `kuaishou.com` â†’ å¿«æ‰‹

### 2. æ™ºèƒ½URLæå–
æ”¯æŒä»å¤æ‚æ–‡æœ¬ä¸­æå–URLï¼š
```json
// åŸå§‹åˆ†äº«æ–‡æœ¬
"ğŸ˜Šå¥½æ£’çš„è§†é¢‘ https://www.xiaohongshu.com/discovery/item/xxx âœ¨å¿…çœ‹"

// è‡ªåŠ¨æå–ä¸ºï¼ˆåˆ é™¤httpså‰çš„æ‰€æœ‰å­—ç¬¦å’Œç©ºæ ¼ï¼‰
"https://www.xiaohongshu.com/discovery/item/xxx âœ¨å¿…çœ‹"
```

### 3. å¹³å°ç‰¹å®šå¤„ç†
ä¸åŒå¹³å°é‡‡ç”¨ä¸åŒçš„è¯·æ±‚æ–¹å¼ï¼š
- **æŠ–éŸ³/TikTok**: GETè¯·æ±‚ï¼ŒURLå‚æ•°æ ¼å¼
- **å“”å“©å“”å“©**: GETè¯·æ±‚ï¼ŒURLå‚æ•°æ ¼å¼  
- **å°çº¢ä¹¦**: **JSONæ ¼å¼çš„POSTè¯·æ±‚**ï¼Œç‰¹æ®ŠURLå¤„ç†
- **å¿«æ‰‹**: GETè¯·æ±‚ï¼ŒURLå‚æ•°æ ¼å¼

### 4. çµæ´»è¾“å…¥æ ¼å¼
æ”¯æŒå¤šç§è¾“å…¥æ ¼å¼ï¼š
- âœ… çº¯URLï¼š`https://v.douyin.com/iFRvuEjE/`
- âœ… åŒ…å«æ ‡é¢˜ï¼š`ã€è§†é¢‘ã€‘https://v.douyin.com/iFRvuEjE/`
- âœ… åŒ…å«emojiï¼š`ğŸ˜Š https://v.douyin.com/iFRvuEjE/ ğŸ‘`
- âœ… æ··åˆæ–‡æœ¬ï¼š`çœ‹è¿™ä¸ªè§†é¢‘ https://v.douyin.com/iFRvuEjE/ è¶…æ£’çš„`

## ğŸ” è°ƒè¯•å’Œæµ‹è¯•

### æŸ¥çœ‹åœ¨çº¿æ–‡æ¡£
è®¿é—® [http://localhost:3000/api/docs](http://localhost:3000/api/docs) æŸ¥çœ‹Swaggeræ–‡æ¡£

### å¥åº·æ£€æŸ¥
```bash
curl http://localhost:3000/api/video/health
```

### æ”¯æŒçš„å¹³å°åˆ—è¡¨
```bash
curl http://localhost:3000/api/video/platforms
```

## ğŸ’¡ æœ€ä½³å®è·µ

1. **é”™è¯¯å¤„ç†**ï¼šå§‹ç»ˆæ£€æŸ¥å“åº”çš„ `code` å­—æ®µ
2. **è¶…æ—¶è®¾ç½®**ï¼šå»ºè®®è®¾ç½®10-15ç§’çš„è¯·æ±‚è¶…æ—¶
3. **é‡è¯•æœºåˆ¶**ï¼šå¯¹äºç½‘ç»œé”™è¯¯å¯ä»¥å®ç°ç®€å•çš„é‡è¯•
4. **æ—¥å¿—è®°å½•**ï¼šè®°å½•è¯·æ±‚å’Œå“åº”ç”¨äºè°ƒè¯•

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **APIå¯†é’¥**ï¼šç¡®ä¿å·²é…ç½®æœ‰æ•ˆçš„52api.cnå¯†é’¥
2. **é¢‘ç‡é™åˆ¶**ï¼šæ³¨æ„ç¬¬ä¸‰æ–¹APIçš„è°ƒç”¨é¢‘ç‡é™åˆ¶
3. **ç½‘ç»œç¯å¢ƒ**ï¼šç¡®ä¿æœåŠ¡å™¨èƒ½è®¿é—®ç¬¬ä¸‰æ–¹APIæœåŠ¡
4. **URLæœ‰æ•ˆæ€§**ï¼šä½¿ç”¨æœ‰æ•ˆçš„è§†é¢‘åˆ†äº«é“¾æ¥è¿›è¡Œæµ‹è¯• 