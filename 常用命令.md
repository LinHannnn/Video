# ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤å‚è€ƒ

## ğŸš€ æœåŠ¡ç®¡ç†

### å¯åŠ¨æœåŠ¡
```bash
cd /home/devbox/project/Video
npm start
```

### å¼€å‘æ¨¡å¼å¯åŠ¨ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰
```bash
npm run dev
```

### åœæ­¢æœåŠ¡
```bash
# æ–¹æ³•1ï¼šæ€æ­»æ‰€æœ‰ node è¿›ç¨‹
pkill -f "node app.js"

# æ–¹æ³•2ï¼šæ€æ­»æ‰€æœ‰ nodemon è¿›ç¨‹
pkill -f nodemon

# æ–¹æ³•3ï¼šæŸ¥æ‰¾å¹¶æ€æ­»ç‰¹å®šç«¯å£è¿›ç¨‹
netstat -tlnp | grep :3000
kill -9 <è¿›ç¨‹ID>
```

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
# æ£€æŸ¥3000ç«¯å£æ˜¯å¦è¢«å ç”¨
netstat -tlnp | grep :3000

# æŸ¥çœ‹ node è¿›ç¨‹
ps aux | grep node
```

## ğŸ§ª æµ‹è¯•å‘½ä»¤

### æµ‹è¯•å¥åº·æ£€æŸ¥
```bash
curl http://localhost:3000/api/video/health | python3 -m json.tool
```

### æµ‹è¯•ç™»å½•æ¥å£
```bash
# æµ‹è¯•ç¼ºå°‘å‚æ•°çš„æƒ…å†µ
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{}' | python3 -m json.tool

# æµ‹è¯•æ­£å¸¸ç™»å½•ï¼ˆéœ€è¦çœŸå®çš„ codeï¼‰
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"loginCode":"your_code_here"}' | python3 -m json.tool
```

### è¿è¡Œæµ‹è¯•è„šæœ¬
```bash
node scripts/test-wechat-login.js
```

## ğŸ—„ï¸ æ•°æ®åº“ç®¡ç†

### åˆ›å»ºç”¨æˆ·è¡¨
```bash
node scripts/createUsersTable.js
```

### è¿æ¥æ•°æ®åº“
```bash
mysql -h video-extract-db-mysql.ns-s63t2o94.svc -P 3306 -u root -p
# å¯†ç ï¼š12345678
```

### æŸ¥çœ‹ç”¨æˆ·è¡¨
```sql
USE video_extract_db;
SHOW TABLES;
SELECT * FROM users;
```

### æ¸…ç©ºç”¨æˆ·è¡¨ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
```sql
TRUNCATE TABLE users;
```

## ğŸ“ æ—¥å¿—æŸ¥çœ‹

### æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
```bash
tail -f logs/combined.log
```

### æŸ¥çœ‹é”™è¯¯æ—¥å¿—
```bash
tail -f logs/error.log
```

### æŸ¥çœ‹æœ€è¿‘100è¡Œæ—¥å¿—
```bash
tail -n 100 logs/combined.log
```

### æœç´¢ç‰¹å®šæ—¥å¿—
```bash
grep "ç™»å½•" logs/combined.log
grep "error" logs/error.log
```

## ğŸ”§ ç¯å¢ƒé…ç½®

### æ£€æŸ¥ç¯å¢ƒå˜é‡
```bash
node -e "require('dotenv').config(); console.log('WX_APPID:', process.env.WX_APPID); console.log('WX_APPSECRET:', process.env.WX_APPSECRET ? 'âœ… å·²é…ç½®' : 'âŒ æœªé…ç½®'); console.log('JWT_SECRET:', process.env.JWT_SECRET !== 'your_jwt_secret_key_here' ? 'âœ… å·²é…ç½®' : 'âŒ æœªé…ç½®');"
```

### ç”Ÿæˆæ–°çš„ JWT_SECRET
```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

## ğŸ“¦ ä¾èµ–ç®¡ç†

### å®‰è£…æ‰€æœ‰ä¾èµ–
```bash
npm install
# æˆ–ä½¿ç”¨ pnpm
pnpm install
```

### å®‰è£…æ–°ä¾èµ–
```bash
npm install <package-name>
```

### æ›´æ–°ä¾èµ–
```bash
npm update
```

### æŸ¥çœ‹å·²å®‰è£…çš„åŒ…
```bash
npm list --depth=0
```

## ğŸ› é—®é¢˜æ’æŸ¥

### ç«¯å£è¢«å ç”¨
```bash
# æŸ¥æ‰¾å ç”¨3000ç«¯å£çš„è¿›ç¨‹
netstat -tlnp | grep :3000
# æˆ–
ss -tlnp | grep :3000

# æ€æ­»è¿›ç¨‹
kill -9 <è¿›ç¨‹ID>
```

### æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
mysql -h video-extract-db-mysql.ns-s63t2o94.svc -P 3306 -u root -p

# æ£€æŸ¥æ•°æ®åº“æœåŠ¡çŠ¶æ€ï¼ˆå¦‚æœæ˜¯æœ¬åœ°ï¼‰
systemctl status mysql
```

### æ¨¡å—æ‰¾ä¸åˆ°
```bash
# é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules
npm install
```

### æŸ¥çœ‹å®Œæ•´é”™è¯¯å †æ ˆ
```bash
NODE_ENV=development npm start
```

## ğŸ”„ Git æ“ä½œ

### æŸ¥çœ‹çŠ¶æ€
```bash
git status
```

### æäº¤æ›´æ”¹
```bash
git add .
git commit -m "æ·»åŠ è‡ªåŠ¨è®°å½•ç”¨æˆ·ä¿¡æ¯"
git push origin main
```

### æ‹‰å–æœ€æ–°ä»£ç 
```bash
git pull origin main
```

## ğŸ“± å°ç¨‹åºå¼€å‘

### æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
```bash
# ç¡®ä¿å·²å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·
# å¯¼å…¥é¡¹ç›®ï¼šé€‰æ‹© miniprogram ç›®å½•
```

### å°ç¨‹åºæµ‹è¯•
```bash
# åœ¨å¼€å‘è€…å·¥å…·æ§åˆ¶å°è¿è¡Œ
wx.login({
  success: res => console.log('code:', res.code)
})
```

## ğŸš¨ ç´§æ€¥æƒ…å†µ

### å®Œå…¨é‡å¯æœåŠ¡
```bash
# åœæ­¢æ‰€æœ‰ç›¸å…³è¿›ç¨‹
pkill -9 -f node
pkill -9 -f nodemon

# é‡æ–°å¯åŠ¨
cd /home/devbox/project/Video
npm start
```

### æ¸…ç†æ—¥å¿—æ–‡ä»¶
```bash
# å¤‡ä»½æ—§æ—¥å¿—
mv logs/combined.log logs/combined.log.bak
mv logs/error.log logs/error.log.bak

# åˆ›å»ºæ–°æ—¥å¿—æ–‡ä»¶
touch logs/combined.log
touch logs/error.log
```

### é‡ç½®æ•°æ®åº“ï¼ˆè°¨æ…ï¼‰
```bash
mysql -h video-extract-db-mysql.ns-s63t2o94.svc -P 3306 -u root -p <<EOF
DROP DATABASE IF EXISTS video_extract_db;
CREATE DATABASE video_extract_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
EOF

# é‡æ–°åˆ›å»ºè¡¨
node scripts/createUsersTable.js
```

## ğŸ“Š æ€§èƒ½ç›‘æ§

### æŸ¥çœ‹ç³»ç»Ÿèµ„æº
```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# æŸ¥çœ‹CPUä½¿ç”¨
top -n 1

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
df -h
```

### æŸ¥çœ‹ Node.js è¿›ç¨‹èµ„æº
```bash
ps aux | grep node
```

## ğŸ’¡ å¿«æ·è„šæœ¬

### ä¸€é”®é‡å¯æœåŠ¡
```bash
#!/bin/bash
pkill -f "node app.js"
sleep 2
cd /home/devbox/project/Video && npm start &
echo "âœ… æœåŠ¡å·²é‡å¯"
```

### ä¸€é”®æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
#!/bin/bash
echo "ğŸ” æ£€æŸ¥æœåŠ¡çŠ¶æ€..."
curl -s http://localhost:3000/api/video/health | python3 -m json.tool
```

ä¿å­˜ä¸º `check-service.sh` å¹¶æ·»åŠ æ‰§è¡Œæƒé™ï¼š
```bash
chmod +x check-service.sh
./check-service.sh
```
