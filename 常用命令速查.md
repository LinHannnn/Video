# ğŸ“Œ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

## ğŸš€ æœåŠ¡ç®¡ç†

### å¯åŠ¨åç«¯æœåŠ¡
```bash
cd /home/devbox/project/Video
pnpm dev
```

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep :3000

# å¥åº·æ£€æŸ¥
curl http://localhost:3000/api/video/health
```

### åœæ­¢æœåŠ¡
```bash
# æ–¹æ³•1ï¼šç›´æ¥åœ¨ç»ˆç«¯æŒ‰ Ctrl+C

# æ–¹æ³•2ï¼šæ€æ­»è¿›ç¨‹
pkill -f "node app.js"
```

---

## ğŸ‘¥ ç”¨æˆ·æ•°æ®ç®¡ç†

### æŸ¥çœ‹ç”¨æˆ·ç»Ÿè®¡
```bash
cd /home/devbox/project/Video
node scripts/checkUsers.js
```

### æ•°æ®åº“ç›´æ¥æŸ¥è¯¢
```bash
# è¿æ¥æ•°æ®åº“
mysql -h video-extract-db-mysql.ns-s63t2o94.svc -P 3306 -u root -p12345678 video_extract_db

# æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·
SELECT * FROM users;

# æŸ¥çœ‹ä»Šæ—¥æ–°å¢
SELECT * FROM users WHERE DATE(created_at) = CURDATE();

# æŸ¥çœ‹ä»Šæ—¥æ´»è·ƒ
SELECT * FROM users WHERE DATE(last_login_time) = CURDATE();

# ç»Ÿè®¡æ€»æ•°
SELECT COUNT(*) FROM users;
```

---

## ğŸ“Š æ•°æ®ç»Ÿè®¡æŸ¥è¯¢

### ç”¨æˆ·æ¦‚å†µ
```sql
-- æ€»ç”¨æˆ·æ•°
SELECT COUNT(*) as total FROM users;

-- ä»Šæ—¥æ–°å¢
SELECT COUNT(*) FROM users WHERE DATE(created_at) = CURDATE();

-- ä»Šæ—¥æ´»è·ƒ
SELECT COUNT(*) FROM users WHERE DATE(last_login_time) = CURDATE();

-- æ‰‹æœºå·ç»‘å®šç‡
SELECT 
  COUNT(*) as total,
  SUM(CASE WHEN phone IS NOT NULL THEN 1 ELSE 0 END) as with_phone,
  ROUND(SUM(CASE WHEN phone IS NOT NULL THEN 1 ELSE 0 END) * 100.0 / COUNT(*), 2) as bind_rate
FROM users;
```

### æ´»è·ƒåº¦åˆ†æ
```sql
-- ç™»å½•é¢‘ç‡åˆ†å¸ƒ
SELECT 
  CASE 
    WHEN login_count = 1 THEN '1æ¬¡'
    WHEN login_count BETWEEN 2 AND 5 THEN '2-5æ¬¡'
    WHEN login_count BETWEEN 6 AND 10 THEN '6-10æ¬¡'
    ELSE '10æ¬¡ä»¥ä¸Š'
  END as frequency,
  COUNT(*) as user_count
FROM users
GROUP BY frequency;

-- æœ€æ´»è·ƒç”¨æˆ· TOP 10
SELECT 
  id,
  LEFT(openid, 10) as openid,
  login_count,
  last_login_time
FROM users
ORDER BY login_count DESC
LIMIT 10;
```

---

## ğŸ”§ æ•°æ®åº“ç»´æŠ¤

### åˆ›å»ºç”¨æˆ·è¡¨
```bash
cd /home/devbox/project/Video
node scripts/createUsersTable.js
```

### å¤‡ä»½æ•°æ®åº“
```bash
mysqldump -h video-extract-db-mysql.ns-s63t2o94.svc \
  -P 3306 -u root -p12345678 \
  video_extract_db > backup_$(date +%Y%m%d).sql
```

### æ¢å¤æ•°æ®åº“
```bash
mysql -h video-extract-db-mysql.ns-s63t2o94.svc \
  -P 3306 -u root -p12345678 \
  video_extract_db < backup_20251005.sql
```

---

## ğŸ› é—®é¢˜æ’æŸ¥

### æŸ¥çœ‹æ—¥å¿—
```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f logs/app.log

# æŸ¥çœ‹æœ€è¿‘100è¡Œ
tail -n 100 logs/app.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep -i error logs/app.log
```

### æµ‹è¯•æ•°æ®åº“è¿æ¥
```bash
# æ–¹æ³•1ï¼šä½¿ç”¨ mysql å‘½ä»¤
mysql -h video-extract-db-mysql.ns-s63t2o94.svc -P 3306 -u root -p12345678 -e "SELECT 1"

# æ–¹æ³•2ï¼šä½¿ç”¨åˆ›å»ºè¡¨è„šæœ¬ï¼ˆä¼šæµ‹è¯•è¿æ¥ï¼‰
node scripts/createUsersTable.js
```

### æµ‹è¯•å¾®ä¿¡ç™»å½•
```bash
# ä½¿ç”¨æµ‹è¯•è„šæœ¬
node scripts/test-wechat-login.js
```

---

## ğŸ“¦ ä¾èµ–ç®¡ç†

### å®‰è£…ä¾èµ–
```bash
cd /home/devbox/project/Video
pnpm install
```

### æ›´æ–°ä¾èµ–
```bash
pnpm update
```

### æŸ¥çœ‹ä¾èµ–ç‰ˆæœ¬
```bash
pnpm list
```

---

## ğŸ”‘ ç¯å¢ƒå˜é‡

### æŸ¥çœ‹å½“å‰é…ç½®
```bash
cd /home/devbox/project/Video
cat .env
```

### é‡è¦é…ç½®é¡¹
```bash
# æœåŠ¡å™¨é…ç½®
PORT=3000
HOST=0.0.0.0

# æ•°æ®åº“é…ç½®
DB_HOST=video-extract-db-mysql.ns-s63t2o94.svc
DB_PORT=3306
DB_USER=root
DB_PASSWORD=12345678
DB_NAME=video_extract_db

# å¾®ä¿¡å°ç¨‹åºé…ç½®
WX_APPID=wx638ec29150825d0d
WX_APPSECRET=e1a2edb85223deb70257809c59fc1b54

# JWTé…ç½®
JWT_SECRET=your_jwt_secret_key_here
```

---

## ğŸŒ API æµ‹è¯•

### å¥åº·æ£€æŸ¥
```bash
curl http://localhost:3000/api/video/health
```

### æµ‹è¯•ç™»å½•æ¥å£
```bash
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "loginCode": "test_code",
    "phoneCode": null
  }'
```

---

## ğŸ“± å°ç¨‹åºå¼€å‘

### ç¼–è¯‘å°ç¨‹åº
```bash
# åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­
1. æ‰“å¼€é¡¹ç›®ç›®å½•: /home/devbox/project/Video/miniprogram
2. ç‚¹å‡»"ç¼–è¯‘"æŒ‰é’®
3. åœ¨æ¨¡æ‹Ÿå™¨ä¸­æµ‹è¯•
```

### ä¸Šä¼ ä»£ç 
```bash
# åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­
1. ç‚¹å‡»"ä¸Šä¼ "æŒ‰é’®
2. å¡«å†™ç‰ˆæœ¬å·å’Œé¡¹ç›®å¤‡æ³¨
3. ç¡®è®¤ä¸Šä¼ 
```

---

## ğŸ¯ å¿«é€Ÿå‘½ä»¤

### ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒ
```bash
cd /home/devbox/project/Video && pnpm dev
```

### ä¸€é”®æŸ¥çœ‹ç”¨æˆ·æ•°æ®
```bash
cd /home/devbox/project/Video && node scripts/checkUsers.js
```

### ä¸€é”®å¥åº·æ£€æŸ¥
```bash
curl -s http://localhost:3000/api/video/health | python3 -m json.tool
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `âœ…_å¿«é€Ÿç™»å½•åŠŸèƒ½å®Œæˆæ€»ç»“.md` - åŠŸèƒ½å®Œæˆæ€»ç»“
- `ä¸ªäººå°ç¨‹åºå¿«é€Ÿç™»å½•æŒ‡å—.md` - å¿«é€Ÿç™»å½•è¯¦ç»†è¯´æ˜
- `ç”¨æˆ·ä¿¡æ¯è®°å½•è¯´æ˜.md` - ç”¨æˆ·æ•°æ®è®°å½•æœºåˆ¶
- `å¾®ä¿¡æ‰‹æœºå·ç™»å½•å®Œæ•´æŒ‡å—.md` - ä¼ä¸šå°ç¨‹åºæ‰©å±•åŠŸèƒ½

---

**æ›´æ–°æ—¶é—´**: 2025-10-05  
**ç‰ˆæœ¬**: v1.0.0
