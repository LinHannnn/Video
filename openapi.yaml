openapi: 3.0.3
info:
  title: è§†é¢‘æå–åç«¯API
  description: |
    åŸºäºNode.jså¼€å‘çš„è§†é¢‘æå–åç«¯ç³»ç»Ÿï¼Œæ”¯æŒå¤šå¹³å°è§†é¢‘é“¾æ¥è§£æã€‚
    
    ## åŠŸèƒ½ç‰¹æ€§
    - ğŸ¯ æ”¯æŒæŠ–éŸ³/TikTokã€å“”å“©å“”å“©ã€å°çº¢ä¹¦ã€å¿«æ‰‹ç­‰å¹³å°
    - ğŸ”‘ å®Œæ•´çš„APIå¯†é’¥ç®¡ç†ç³»ç»Ÿ
    - ğŸ›¡ï¸ è¯·æ±‚é¢‘ç‡é™åˆ¶å’Œå®‰å…¨é˜²æŠ¤
    - ğŸ“ è¯¦ç»†çš„è¯·æ±‚å’Œé”™è¯¯æ—¥å¿—
    
    ## è®¤è¯è¯´æ˜
    æœ¬APIç›®å‰ä¸éœ€è¦è®¤è¯ï¼Œä½†å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®æ–½é€‚å½“çš„è®¤è¯æœºåˆ¶ã€‚
    
    ## è¯·æ±‚é™åˆ¶
    - é€šç”¨æ¥å£: 15åˆ†é’Ÿå†…æœ€å¤š100æ¬¡è¯·æ±‚
    - è§†é¢‘è§£æ: 5åˆ†é’Ÿå†…æœ€å¤š20æ¬¡è¯·æ±‚  
    - ç®¡ç†æ¥å£: 10åˆ†é’Ÿå†…æœ€å¤š50æ¬¡è¯·æ±‚
  version: 1.0.0
  contact:
    name: è§†é¢‘æå–åç«¯å›¢é˜Ÿ
    email: support@videoextract.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:3000
    description: å¼€å‘ç¯å¢ƒ
  - url: https://api.videoextract.com
    description: ç”Ÿäº§ç¯å¢ƒ

tags:
  - name: è§†é¢‘è§£æ
    description: è§†é¢‘é“¾æ¥è§£æç›¸å…³æ¥å£
  - name: å¯†é’¥ç®¡ç†
    description: APIå¯†é’¥ç®¡ç†æ¥å£
  - name: ç³»ç»Ÿç›‘æ§
    description: ç³»ç»ŸçŠ¶æ€å’Œç›‘æ§æ¥å£

paths:
  /:
    get:
      tags:
        - ç³»ç»Ÿç›‘æ§
      summary: è·å–APIæœåŠ¡ä¿¡æ¯
      description: è·å–APIæœåŠ¡çš„åŸºæœ¬ä¿¡æ¯å’Œæ–‡æ¡£é“¾æ¥
      responses:
        '200':
          description: æˆåŠŸè¿”å›æœåŠ¡ä¿¡æ¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceInfoResponse'

  /api:
    get:
      tags:
        - ç³»ç»Ÿç›‘æ§
      summary: è·å–APIæ–‡æ¡£
      description: è·å–æ‰€æœ‰å¯ç”¨APIæ¥å£çš„æ–‡æ¡£ä¿¡æ¯
      responses:
        '200':
          description: æˆåŠŸè¿”å›APIæ–‡æ¡£
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiDocResponse'

  /api/video/parse:
    post:
      tags:
        - è§†é¢‘è§£æ
      summary: è§£æè§†é¢‘é“¾æ¥
      description: |
        è§£ææ”¯æŒå¹³å°çš„è§†é¢‘åˆ†äº«é“¾æ¥ï¼Œè·å–è§†é¢‘ä¿¡æ¯å’Œä¸‹è½½åœ°å€ã€‚
        
        ### æ”¯æŒçš„å¹³å°
        - æŠ–éŸ³/TikTok (douyin.com, tiktok.com)
        - å“”å“©å“”å“© (bilibili.com, b23.tv)
        - å°çº¢ä¹¦ (xiaohongshu.com, xhslink.com)
        - å¿«æ‰‹ (kuaishou.com)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VideoParseRequest'
            examples:
              douyin_example:
                summary: æŠ–éŸ³è§†é¢‘è§£æ
                value:
                  url: "https://v.douyin.com/iFRvuEjE/"
                  platform: "auto"
                  options:
                    preferredQuality: "high"
                    extractAudio: false
              bilibili_example:
                summary: å“”å“©å“”å“©è§†é¢‘è§£æ
                value:
                  url: "ã€æ ‡é¢˜ã€‘https://www.bilibili.com/video/BV1xx4y1Z7zz ğŸŒŸåˆ†äº«å†…å®¹"
                  platform: "bilibili"
                  options:
                    preferredQuality: "medium"
              xiaohongshu_example:
                summary: å°çº¢ä¹¦è§†é¢‘è§£æ
                value:
                  url: "ğŸ˜Š çœ‹äº†è¿™ä¸ªè§†é¢‘ https://www.xiaohongshu.com/discovery/item/xxx ğŸ‘"
                  platform: "xiaohongshu"
      responses:
        '200':
          description: è§£ææˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VideoParseResponse'
              examples:
                success_example:
                  summary: è§£ææˆåŠŸç¤ºä¾‹
                  value:
                    code: 200
                    msg: "è§£ææˆåŠŸ"
                    data:
                      platform: "æŠ–éŸ³"
                      title: "ç²¾å½©è§†é¢‘æ ‡é¢˜"
                      author: "åˆ›ä½œè€…æ˜µç§°"
                      duration: "00:30"
                      videoUrl: "https://aweme.snssdk.com/aweme/v1/xxx"
                      coverImage: "https://p3-sign.douyinpic.com/xxx"
                      description: "è§†é¢‘æè¿°å†…å®¹"
                    debug: null
                    exec_time: 1.234
                    user_ip: "127.0.0.1"
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                validation_error:
                  summary: å‚æ•°éªŒè¯å¤±è´¥
                  value:
                    code: 400
                    msg: "è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥"
                    data: null
                    errors:
                      - field: "url"
                        message: "URLä¸èƒ½ä¸ºç©º"
                    debug: null
                    exec_time: 0.05
                    user_ip: "127.0.0.1"
                unsupported_platform:
                  summary: ä¸æ”¯æŒçš„å¹³å°
                  value:
                    code: 400
                    msg: "ä¸æ”¯æŒçš„å¹³å°ï¼Œè¯·æ£€æŸ¥URLæ˜¯å¦æ¥è‡ªæ”¯æŒçš„å¹³å°"
                    data: null
                    debug: null
                    exec_time: 0.02
                    user_ip: "127.0.0.1"
        '429':
          description: è¯·æ±‚è¿‡äºé¢‘ç¹
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/video/platforms:
    get:
      tags:
        - è§†é¢‘è§£æ
      summary: è·å–æ”¯æŒçš„å¹³å°åˆ—è¡¨
      description: è·å–ç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰è§†é¢‘å¹³å°ä¿¡æ¯
      responses:
        '200':
          description: æˆåŠŸè¿”å›æ”¯æŒçš„å¹³å°åˆ—è¡¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlatformsResponse'
              example:
                code: 200
                msg: "è·å–æˆåŠŸ"
                data:
                  platforms:
                    - key: "douyin"
                      name: "æŠ–éŸ³/TikTok"
                    - key: "bilibili"
                      name: "å“”å“©å“”å“©"
                    - key: "xiaohongshu"
                      name: "å°çº¢ä¹¦"
                    - key: "kuaishou"
                      name: "å¿«æ‰‹"
                  total: 4
                debug: null
                exec_time: 0.001
                user_ip: "127.0.0.1"

  /api/video/health:
    get:
      tags:
        - ç³»ç»Ÿç›‘æ§
      summary: å¥åº·æ£€æŸ¥
      description: æ£€æŸ¥APIæœåŠ¡å’Œæ•°æ®åº“çš„è¿è¡ŒçŠ¶æ€
      responses:
        '200':
          description: æœåŠ¡æ­£å¸¸
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthCheckResponse'
              example:
                code: 200
                msg: "æœåŠ¡æ­£å¸¸"
                data:
                  status: "healthy"
                  timestamp: "2025-09-15T19:00:00.000Z"
                  version: "1.0.0"
                  node_version: "v18.17.0"
                  uptime: 3600
                  database: "connected"
                  features:
                    video_parsing: true
                    key_management: true
                debug: null
                exec_time: 0.05
                user_ip: "127.0.0.1"

  /api/admin/keys:
    get:
      tags:
        - å¯†é’¥ç®¡ç†
      summary: è·å–APIå¯†é’¥åˆ—è¡¨
      description: è·å–æ‰€æœ‰APIå¯†é’¥çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬çŠ¶æ€å’Œä½¿ç”¨æƒ…å†µ
      responses:
        '200':
          description: æˆåŠŸè¿”å›å¯†é’¥åˆ—è¡¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KeyListResponse'
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    post:
      tags:
        - å¯†é’¥ç®¡ç†
      summary: æ·»åŠ æ–°çš„APIå¯†é’¥
      description: å‘ç³»ç»Ÿæ·»åŠ æ–°çš„ç¬¬ä¸‰æ–¹APIå¯†é’¥
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateKeyRequest'
            example:
              keyName: "ä¸»å¯†é’¥1"
              keyValue: "52api_your_actual_key_here"
              description: "ä¸»è¦ä½¿ç”¨çš„52APIå¯†é’¥"
      responses:
        '200':
          description: å¯†é’¥æ·»åŠ æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateKeyResponse'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯æˆ–å¯†é’¥åç§°å·²å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/admin/keys/{keyId}:
    get:
      tags:
        - å¯†é’¥ç®¡ç†
      summary: è·å–æŒ‡å®šå¯†é’¥è¯¦æƒ…
      description: æ ¹æ®å¯†é’¥IDè·å–å¯†é’¥çš„è¯¦ç»†ä¿¡æ¯
      parameters:
        - name: keyId
          in: path
          required: true
          description: å¯†é’¥çš„å”¯ä¸€æ ‡è¯†ç¬¦
          schema:
            type: integer
            example: 1
      responses:
        '200':
          description: æˆåŠŸè¿”å›å¯†é’¥è¯¦æƒ…
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KeyDetailResponse'
        '404':
          description: å¯†é’¥ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags:
        - å¯†é’¥ç®¡ç†
      summary: æ›´æ–°APIå¯†é’¥
      description: æ›´æ–°æŒ‡å®šå¯†é’¥çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åç§°ã€å€¼ã€çŠ¶æ€å’Œæè¿°
      parameters:
        - name: keyId
          in: path
          required: true
          description: è¦æ›´æ–°çš„å¯†é’¥ID
          schema:
            type: integer
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateKeyRequest'
            example:
              keyName: "æ›´æ–°åçš„å¯†é’¥åç§°"
              status: "active"
              description: "æ›´æ–°åçš„æè¿°"
      responses:
        '200':
          description: å¯†é’¥æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: å¯†é’¥ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags:
        - å¯†é’¥ç®¡ç†
      summary: åˆ é™¤APIå¯†é’¥
      description: ä»ç³»ç»Ÿä¸­åˆ é™¤æŒ‡å®šçš„APIå¯†é’¥
      parameters:
        - name: keyId
          in: path
          required: true
          description: è¦åˆ é™¤çš„å¯†é’¥ID
          schema:
            type: integer
            example: 1
      responses:
        '200':
          description: å¯†é’¥åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          description: å¯†é’¥ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/admin/keys/batch/status:
    post:
      tags:
        - å¯†é’¥ç®¡ç†
      summary: æ‰¹é‡æ›´æ–°å¯†é’¥çŠ¶æ€
      description: æ‰¹é‡æ›´æ–°å¤šä¸ªå¯†é’¥çš„çŠ¶æ€ï¼ˆå¯ç”¨/ç¦ç”¨ï¼‰
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BatchUpdateRequest'
            example:
              keyIds: [1, 2, 3]
              status: "inactive"
      responses:
        '200':
          description: æ‰¹é‡æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BatchUpdateResponse'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  schemas:
    # è¯·æ±‚æ¨¡å‹
    VideoParseRequest:
      type: object
      required:
        - url
      properties:
        url:
          type: string
          description: è§†é¢‘åˆ†äº«é“¾æ¥
          minLength: 10
          maxLength: 2000
          example: "https://v.douyin.com/iFRvuEjE/"
        platform:
          type: string
          description: å¹³å°ç±»å‹ï¼Œautoä¸ºè‡ªåŠ¨è¯†åˆ«
          enum: [auto, douyin, tiktok, bilibili, xiaohongshu, kuaishou]
          default: auto
        options:
          type: object
          description: è§£æé€‰é¡¹
          properties:
            preferredQuality:
              type: string
              description: æœŸæœ›çš„è§†é¢‘è´¨é‡
              enum: [high, medium, low]
              example: high
            extractAudio:
              type: boolean
              description: æ˜¯å¦æå–éŸ³é¢‘
              default: false

    CreateKeyRequest:
      type: object
      required:
        - keyName
        - keyValue
      properties:
        keyName:
          type: string
          description: å¯†é’¥åç§°
          minLength: 2
          maxLength: 100
          example: "ä¸»å¯†é’¥1"
        keyValue:
          type: string
          description: å¯†é’¥å€¼
          minLength: 10
          maxLength: 255
          example: "52api_your_actual_key_here"
        description:
          type: string
          description: å¯†é’¥æè¿°
          maxLength: 500
          example: "ä¸»è¦ä½¿ç”¨çš„52APIå¯†é’¥"

    UpdateKeyRequest:
      type: object
      properties:
        keyName:
          type: string
          description: å¯†é’¥åç§°
          minLength: 2
          maxLength: 100
        keyValue:
          type: string
          description: å¯†é’¥å€¼
          minLength: 10
          maxLength: 255
        status:
          type: string
          description: å¯†é’¥çŠ¶æ€
          enum: [active, inactive]
        description:
          type: string
          description: å¯†é’¥æè¿°
          maxLength: 500

    BatchUpdateRequest:
      type: object
      required:
        - keyIds
        - status
      properties:
        keyIds:
          type: array
          description: è¦æ›´æ–°çš„å¯†é’¥IDåˆ—è¡¨
          items:
            type: integer
          minItems: 1
          maxItems: 50
          example: [1, 2, 3]
        status:
          type: string
          description: æ–°çš„çŠ¶æ€
          enum: [active, inactive]
          example: inactive

    # å“åº”æ¨¡å‹
    BaseResponse:
      type: object
      properties:
        code:
          type: integer
          description: çŠ¶æ€ç 
          example: 200
        msg:
          type: string
          description: çŠ¶æ€ä¿¡æ¯
          example: "æ“ä½œæˆåŠŸ"
        debug:
          type: string
          nullable: true
          description: è°ƒè¯•ä¿¡æ¯ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰
        exec_time:
          type: number
          description: æ‰§è¡Œè€—æ—¶ï¼ˆç§’ï¼‰
          example: 0.123
        user_ip:
          type: string
          description: å®¢æˆ·ç«¯IPåœ°å€
          example: "127.0.0.1"

    VideoParseResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                platform:
                  type: string
                  description: å¹³å°åç§°
                  example: "æŠ–éŸ³"
                title:
                  type: string
                  description: è§†é¢‘æ ‡é¢˜
                  example: "ç²¾å½©è§†é¢‘æ ‡é¢˜"
                author:
                  type: string
                  description: ä½œè€…ä¿¡æ¯
                  example: "åˆ›ä½œè€…æ˜µç§°"
                duration:
                  type: string
                  description: è§†é¢‘æ—¶é•¿
                  example: "00:30"
                videoUrl:
                  type: string
                  description: è§†é¢‘ä¸‹è½½é“¾æ¥
                  example: "https://aweme.snssdk.com/aweme/v1/xxx"
                coverImage:
                  type: string
                  description: å°é¢å›¾ç‰‡
                  example: "https://p3-sign.douyinpic.com/xxx"
                description:
                  type: string
                  description: è§†é¢‘æè¿°
                  example: "è§†é¢‘æè¿°å†…å®¹"
                audioUrl:
                  type: string
                  description: éŸ³é¢‘é“¾æ¥ï¼ˆå¦‚æœæå–éŸ³é¢‘ï¼‰
                  nullable: true

    PlatformsResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                platforms:
                  type: array
                  items:
                    type: object
                    properties:
                      key:
                        type: string
                        description: å¹³å°æ ‡è¯†
                        example: "douyin"
                      name:
                        type: string
                        description: å¹³å°åç§°
                        example: "æŠ–éŸ³/TikTok"
                total:
                  type: integer
                  description: æ”¯æŒçš„å¹³å°æ€»æ•°
                  example: 4

    HealthCheckResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                status:
                  type: string
                  description: æœåŠ¡çŠ¶æ€
                  example: "healthy"
                timestamp:
                  type: string
                  format: date-time
                  description: å½“å‰æ—¶é—´æˆ³
                version:
                  type: string
                  description: æœåŠ¡ç‰ˆæœ¬
                  example: "1.0.0"
                node_version:
                  type: string
                  description: Node.jsç‰ˆæœ¬
                  example: "v18.17.0"
                uptime:
                  type: number
                  description: æœåŠ¡è¿è¡Œæ—¶é—´ï¼ˆç§’ï¼‰
                  example: 3600
                database:
                  type: string
                  description: æ•°æ®åº“è¿æ¥çŠ¶æ€
                  enum: [connected, disconnected, error]
                  example: "connected"
                features:
                  type: object
                  description: åŠŸèƒ½å¯ç”¨æ€§
                  properties:
                    video_parsing:
                      type: boolean
                      description: è§†é¢‘è§£æåŠŸèƒ½æ˜¯å¦å¯ç”¨
                      example: true
                    key_management:
                      type: boolean
                      description: å¯†é’¥ç®¡ç†åŠŸèƒ½æ˜¯å¦å¯ç”¨
                      example: true

    KeyListResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/ApiKey'

    KeyDetailResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/ApiKey'

    CreateKeyResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                id:
                  type: integer
                  description: æ–°åˆ›å»ºçš„å¯†é’¥ID
                  example: 123
                keyName:
                  type: string
                  description: å¯†é’¥åç§°
                  example: "ä¸»å¯†é’¥1"
                status:
                  type: string
                  description: å¯†é’¥çŠ¶æ€
                  example: "active"

    BatchUpdateResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                updatedCount:
                  type: integer
                  description: æ›´æ–°çš„å¯†é’¥æ•°é‡
                  example: 3
                status:
                  type: string
                  description: è®¾ç½®çš„çŠ¶æ€
                  example: "inactive"

    SuccessResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              nullable: true

    ServiceInfoResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                name:
                  type: string
                  example: "video-extract-backend"
                version:
                  type: string
                  example: "1.0.0"
                description:
                  type: string
                  example: "åŸºäºNode.jsçš„è§†é¢‘æå–åç«¯ç³»ç»Ÿ"
                author:
                  type: string
                  example: "Video Extract Team"
                documentation:
                  type: object
                  properties:
                    video_parse:
                      type: string
                      example: "/api/video/parse"
                    platforms:
                      type: string
                      example: "/api/video/platforms"
                    health:
                      type: string
                      example: "/api/video/health"
                    admin_keys:
                      type: string
                      example: "/api/admin/keys"

    ApiDocResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                video_apis:
                  type: object
                admin_apis:
                  type: object

    ErrorResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              nullable: true
            errors:
              type: array
              items:
                type: object
                properties:
                  field:
                    type: string
                    description: é”™è¯¯å­—æ®µ
                    example: "url"
                  message:
                    type: string
                    description: é”™è¯¯ä¿¡æ¯
                    example: "URLä¸èƒ½ä¸ºç©º"

    ApiKey:
      type: object
      properties:
        id:
          type: integer
          description: å¯†é’¥å”¯ä¸€æ ‡è¯†
          example: 1
        keyName:
          type: string
          description: å¯†é’¥åç§°
          example: "ä¸»å¯†é’¥1"
        keyValue:
          type: string
          description: å¯†é’¥å€¼
          example: "52api_actual_key_value"
        status:
          type: string
          description: å¯†é’¥çŠ¶æ€
          enum: [active, inactive]
          example: "active"
        description:
          type: string
          nullable: true
          description: å¯†é’¥æè¿°
          example: "ä¸»è¦ä½¿ç”¨çš„å¯†é’¥"
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
          example: "2025-01-01T09:00:00.000Z"
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
          example: "2025-01-15T10:30:00.000Z"

  responses:
    NotFound:
      description: è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            code: 404
            msg: "è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨"
            data: null
            debug: null
            exec_time: 0.001
            user_ip: "127.0.0.1"

    TooManyRequests:
      description: è¯·æ±‚è¿‡äºé¢‘ç¹
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            code: 429
            msg: "è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•"
            data: null
            debug: null
            exec_time: 0.001
            user_ip: "127.0.0.1"

    InternalServerError:
      description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            code: 500
            msg: "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"
            data: null
            debug: null
            exec_time: 0.001
            user_ip: "127.0.0.1"

  parameters:
    KeyId:
      name: keyId
      in: path
      required: true
      description: å¯†é’¥çš„å”¯ä¸€æ ‡è¯†ç¬¦
      schema:
        type: integer
        minimum: 1
      example: 1 